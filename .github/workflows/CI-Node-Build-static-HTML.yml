name: CI-Node-Build-static-HTML

on:
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
  
permissions:
  contents: read
  pages: write
  id-token: write
  
jobs:
  job_1:
    name: 1 of 2
    runs-on: ubuntu-latest
    # Build job
    steps:
       - name: Checkout
         uses: actions/checkout@v3
       - run: npm install .
       - run: npm install n-readlines fs path
       - run: node build
       - name: Build actions/upload-pages-artifact
         with:
           name: index
           path: index.html 
         uses: actions/upload-artifact@v3
       - run: node build_profiles
       - name: Build Profies actions/upload-pages-artifact
         with:
           name: pages
           path: |
                  ./pages
                  !./pages/*.txt
         uses: actions/upload-artifact@v3
  job_2:
     name: 2 of 2
     runs-on: ubuntu-latest
     # Build job
     steps:
       - name: Deploy to GitHub Pages
         id: deployment
         uses: actions/deploy-pages@master

